{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://raw.githubusercontent.com/haibol2016/fastqfetcher/master/nextflow_schema.json",
  "title": "haibol2016/fastqfetcher pipeline parameters - EXAMPLE WITH CONDITIONAL LOGIC",
  "description": "Example showing conditional parameter display",
  "type": "object",
  "$defs": {
    "sra_toolkit_options": {
      "title": "SRA Toolkit options",
      "type": "object",
      "fa_icon": "fas fa-download",
      "description": "Options for SRA Toolkit tools (prefetch and fasterq-dump).",
      "properties": {
        "use_controlled_access": {
          "type": "boolean",
          "description": "Download controlled-access SRA data (requires dbGaP repository key)",
          "default": false,
          "help_text": "Set to true if you need to download controlled-access SRA data. When enabled, you must provide the path to your dbGaP repository key (.ngc file).",
          "fa_icon": "fas fa-lock"
        },
        "ngc_path": {
          "type": "string",
          "format": "file-path",
          "description": "Path to dbGaP repository key (.ngc file) for downloading controlled-access data.",
          "help_text": "Required for downloading controlled-access SRA data from dbGaP. Download your repository key from dbGaP and provide the path to the .ngc file.",
          "fa_icon": "fas fa-key"
        },
        "disk_limit": {
          "type": "string",
          "description": "Disk space limit for fasterq-dump (e.g., '50G', '100G'). Default: memory size allocated to the process.",
          "help_text": "Maximum disk space that fasterq-dump can use during conversion. If not specified, defaults to the memory size allocated to the process.",
          "fa_icon": "fas fa-hdd",
          "pattern": "^\\d+(\\.\\d+)?\\s*(K|M|G|T)?B?$"
        },
        "pgzip_compress_level": {
          "type": "string",
          "description": "Compression level for pigz (1-9). Higher values = better compression but slower. Default: 5.",
          "help_text": "Controls the compression level for pigz when compressing FASTQ files. Range: 1 (fastest, least compression) to 9 (slowest, best compression).",
          "fa_icon": "fas fa-compress",
          "pattern": "^[1-9]$",
          "default": "5"
        },
        "max_size": {
          "type": "string",
          "description": "Maximum size for prefetch download (e.g., '20G', '50G'). Default: 20G.",
          "help_text": "Maximum size limit for prefetch downloads. Prefetch will stop if the download exceeds this size.",
          "fa_icon": "fas fa-weight-hanging",
          "pattern": "^\\d+(\\.\\d+)?\\s*(K|M|G|T)?B?$",
          "default": "20G"
        }
      },
      "if": {
        "properties": {
          "use_controlled_access": {
            "const": true
          }
        }
      },
      "then": {
        "required": ["ngc_path"],
        "properties": {
          "ngc_path": {
            "type": "string",
            "format": "file-path",
            "description": "REQUIRED: Path to dbGaP repository key (.ngc file) for downloading controlled-access data.",
            "help_text": "This parameter is REQUIRED when downloading controlled-access SRA data. Download your repository key from dbGaP and provide the path to the .ngc file.",
            "fa_icon": "fas fa-key"
          }
        }
      }
    },
    "multiqc_options_example": {
      "title": "MultiQC options - EXAMPLE",
      "type": "object",
      "fa_icon": "fas fa-chart-bar",
      "description": "Example showing conditional MultiQC options",
      "properties": {
        "run_multiqc": {
          "type": "boolean",
          "description": "Run MultiQC to generate quality control reports",
          "default": true,
          "help_text": "Set to false to skip MultiQC report generation",
          "fa_icon": "fas fa-chart-bar"
        },
        "multiqc_config": {
          "type": "string",
          "format": "file-path",
          "description": "Custom config file to supply to MultiQC.",
          "help_text": "Path to a custom MultiQC configuration YAML file. See MultiQC documentation for configuration options.",
          "fa_icon": "fas fa-cog"
        },
        "multiqc_logo": {
          "type": "string",
          "format": "file-path",
          "description": "Custom logo file to supply to MultiQC. File name must also be set in the MultiQC config file",
          "help_text": "Path to a custom logo image file (PNG, SVG, etc.) to display in the MultiQC report. The logo file name must also be referenced in the MultiQC config file.",
          "fa_icon": "fas fa-image"
        },
        "multiqc_title": {
          "type": "string",
          "description": "MultiQC report title. Printed as page header, used for filename if not otherwise specified.",
          "fa_icon": "fas fa-file-signature"
        }
      },
      "if": {
        "properties": {
          "run_multiqc": {
            "const": true
          }
        }
      },
      "then": {
        "properties": {
          "multiqc_config": {
            "type": "string",
            "format": "file-path",
            "description": "Custom config file to supply to MultiQC (shown when MultiQC is enabled).",
            "help_text": "Path to a custom MultiQC configuration YAML file.",
            "fa_icon": "fas fa-cog"
          },
          "multiqc_logo": {
            "type": "string",
            "format": "file-path",
            "description": "Custom logo file for MultiQC (shown when MultiQC is enabled).",
            "help_text": "Path to a custom logo image file.",
            "fa_icon": "fas fa-image"
          },
          "multiqc_title": {
            "type": "string",
            "description": "MultiQC report title (shown when MultiQC is enabled).",
            "fa_icon": "fas fa-file-signature"
          }
        }
      }
    }
  },
  "allOf": [
    {
      "$ref": "#/$defs/sra_toolkit_options"
    },
    {
      "$ref": "#/$defs/multiqc_options_example"
    }
  ]
}

